<!--Dados pessoais-->
<form [formGroup]="formulario" novalidate (ngSubmit)="confirmar()">
  <mat-card class="mat-card-borda">
    <mat-grid-list [cols]="innerWidth" rowHeight="3:1">
      <label>Dados pessoais</label>
      <div class="separator">
        <div *ngFor="let option of optionsDados">
          <mat-grid-tile>
            <mat-form-field appearance="outline" *ngIf="option.name !== 'dataDeNascimento'; else datepicker">
              <mat-label>{{ option.desc }}</mat-label>
              <input
                matInput
                formControlName="{{ option.name }}"
                required
              />
              <mat-error
                *ngIf="
                  !formulario.get(option.name)?.valid &&
                  formulario.get(option.name)?.touched
                "
                class="form-text text-danger"
                >{{ option.desc }} inválido!</mat-error
              >
            </mat-form-field>
          </mat-grid-tile>
        </div>
      </div>
    </mat-grid-list>
  </mat-card>
  <!--Endereço-->
  <mat-card formGroupName="endereco" class="mat-card-borda">
    <mat-grid-list [cols]="innerWidth" rowHeight="3:1">
      <label>Endereço</label>
      <div class="separator">
        <div *ngFor="let option of optionsEndereco">
          <mat-grid-tile>
            <mat-form-field appearance="outline">
              <mat-label>{{ option.desc }}</mat-label>
              <input
                matInput
                formControlName="{{ option.name }}"
                required
              />
              <mat-error
                *ngIf="
                  !formulario.get(option.erro)?.valid &&
                  formulario.get(option.erro)?.touched
                "
                class="form-text text-danger"
                >{{ option.desc }} inválido!</mat-error
              >
            </mat-form-field>
          </mat-grid-tile>
        </div>
      </div>
    </mat-grid-list>
    <div class="botao">
      <button mat-raised-button color="primary" type="submit">
        Atualizar dados
      </button>
    </div>
  </mat-card>
</form>

<ng-template #datepicker [formGroup]=formulario>
  <mat-form-field appearance="fill">
    <mat-label>Choose a date</mat-label>
    <input matInput [matDatepicker]="picker" formControlName="dataDeNascimento">
    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
    <mat-datepicker #picker startView="year" [startAt]="startDate"></mat-datepicker>
  </mat-form-field>
</ng-template>

<ng-template #consulta class="consulta">
  <mat-error class="erro-personalizado">
    <p>Você ainda não consultou nenhum cliente!</p>
    <p>Gostaria de consultar agora?</p>
  </mat-error>
  <app-consulta [reuse]="true" (emiteDados)="recebeDados($event)"></app-consulta>
</ng-template>
